datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
}

enum Service {
  spotify
  spotifyplayback
  soundcloud
  apple
  tidal
}

model Session {
  id              String    @id
  sid             String    @unique
  data            String
  expiresAt       DateTime
}

model User {
  id              String    @default(uuid()) @id
  auth0Id         String    @unique
  email           String    @unique
  firstName       String
  lastName        String
  updatedAt       DateTime  @updatedAt

  connections     Connection[]
}

model Connection {
  accessToken     String
  refreshToken    String
  service         Service
  expiresAt       DateTime
  updatedAt       DateTime  @updatedAt

  userId          String
  user            User      @relation(fields: [userId], references: [id])

  @@unique([userId, service])
}
